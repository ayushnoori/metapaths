<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Inform modern browsers that this page supports both dark and light color schemes,
  and the page author prefers light. --><meta name="color-scheme" content="dark light">
<script>
  // If `prefers-color-scheme` is not supported, fall back to light mode.
  // i.e. In this case, inject the `light` CSS before the others, with
  // no media filter so that it will be downloaded with highest priority.
  if (window.matchMedia("(prefers-color-scheme: dark)").media === "not all") {
    document.documentElement.style.display = "none";
    document.head.insertAdjacentHTML(
      "beforeend",
      "<link id=\"css\" rel=\"stylesheet\" href=\"https://bootswatch.com/3/flatly/bootstrap.css\" onload=\"document.documentElement.style.display = ''\">"
    );
  }
</script><title>arXiv CS MAG Demonstration • metapaths</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="arXiv CS MAG Demonstration">
<meta property="og:description" content="metapaths">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Flatly Theme - Light  --><link id="css-light" rel="stylesheet" href="https://bootswatch.com/3/flatly/bootstrap.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<!-- Darkly Theme - Dark --><link id="css-dark" rel="stylesheet" href="https://bootswatch.com/3/darkly/bootstrap.css" media="(prefers-color-scheme: dark)">
<!-- preferably CSS --><link rel="stylesheet" href="../preferably.css">
<link id="css-code-light" rel="stylesheet" href="../code-color-scheme-light.css" media="(prefers-color-scheme: light), (prefers-color-scheme: no-preference)">
<link id="css-code-dark" rel="stylesheet" href="../code-color-scheme-dark.css" media="(prefers-color-scheme: dark)">
<script src="../darkswitch.js"></script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">metapaths</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/arxiv-demo.html">arXiv CS MAG Demonstration</a>
    </li>
    <li>
      <a href="../articles/biokg-demo.html">BioKG Demonstration</a>
    </li>
    <li>
      <a href="../articles/metapaths-demo.html">mtcars Demonstration</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
          <a href="#" id="css-toggle-btn">
            <span class="fas fa-adjust fa-lg"></span>
          </a>
        </li>
        
        <li>
  <a href="https://github.com/ayushnoori/metapaths/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
        
        


      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>arXiv CS MAG Demonstration</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ayushnoori/metapaths/blob/HEAD/vignettes/arxiv-demo.Rmd" class="external-link"><code>vignettes/arxiv-demo.Rmd</code></a></small>
      <div class="hidden name"><code>arxiv-demo.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="download-arxiv-cs-mag">Download arXiv CS MAG<a class="anchor" aria-label="anchor" href="#download-arxiv-cs-mag"></a>
</h2>
<p>The following Python script downloads the <code>ogbn-arxiv</code>
(<em>i.e.</em>, arXiv CS MAG) knowledge graph from the <a href="https://ogb.stanford.edu/docs/nodeprop/#ogbn-arxiv" class="external-link">Open Graph
Benchmark (OGB)</a>.</p>
<p>The <code>ogbn-arxiv</code> dataset is described by OGB as
follows:</p>
<blockquote>
<p>“The <code>ogbn-arxiv</code> dataset is a directed graph,
representing the citation network between all Computer Science (CS)
arXiv papers indexed by MAG [1]. Each node is an arXiv paper and each
directed edge indicates that one paper cites another one. Each paper
comes with a 128-dimensional feature vector obtained by averaging the
embeddings of words in its title and abstract. The embeddings of
individual words are computed by running the skip-gram model [2] over
the MAG corpus. We also provide the mapping from MAG paper IDs into the
raw texts of titles and abstracts <a href="https://snap.stanford.edu/ogb/data/misc/ogbn_arxiv/titleabs.tsv.gz" class="external-link">here</a>.
In addition, all papers are also associated with the year that the
corresponding paper was published.”</p>
<p>The task is to predict the 40 subject areas of arXiv CS papers, e.g.,
cs.AI, cs.LG, and cs.OS, which are manually determined (i.e., labeled)
by the paper’s authors and arXiv moderators. With the volume of
scientific publications doubling every 12 years over the past century,
it is practically important to automatically classify each publication’s
areas and topics. Formally, the task is to predict the primary
categories of the arXiv papers, which is formulated as a 40-class
classification problem.</p>
</blockquote>
<div class="section level4">
<h4 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Kuansan Wang, Zhihong Shen, Chiyuan Huang, Chieh-Han Wu, Yuxiao
Dong, and Anshul Kanakia. Microsoft academic graph: When experts are not
enough. Quantitative Science Studies, 1(1):396–413, 2020.</li>
<li>Tomas Mikolov, Ilya Sutskever, Kai Chen, Greg S Corrado, and Jeff
Dean. Distributed representationsof words and phrases and their
compositionality. In Advances in Neural Information Processing Systems
(NeurIPS), pp. 3111–3119, 2013.</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ogb.nodeproppred <span class="im">import</span> NodePropPredDataset</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>dataset <span class="op">=</span> NodePropPredDataset(name <span class="op">=</span> <span class="st">"ogbn-arxiv"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>split_idx <span class="op">=</span> dataset.get_idx_split()</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>train_idx, valid_idx, test_idx <span class="op">=</span> split_idx[<span class="st">"train"</span>], split_idx[<span class="st">"valid"</span>], split_idx[<span class="st">"test"</span>]</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>graph, label <span class="op">=</span> dataset[<span class="dv">0</span>] </span></code></pre></div>
<p>Read the label ID to arXiv category and node ID to MAG paper ID
mappings.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>label_to_category <span class="op">=</span> pd.read_csv(<span class="st">"dataset/ogbn_arxiv/mapping/labelidx2arxivcategeory.csv.gz"</span>, compression <span class="op">=</span> <span class="st">"gzip"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>nodeid_to_paperid <span class="op">=</span> pd.read_csv(<span class="st">"dataset/ogbn_arxiv/mapping/nodeidx2paperid.csv.gz"</span>, compression <span class="op">=</span> <span class="st">"gzip"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>nodeid_to_paperid.head()</span></code></pre></div>
<p>Clean arXiv category labels to conform to arXiv notation.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>label_to_category[<span class="st">'arxiv category'</span>] <span class="op">=</span> label_to_category[<span class="st">'arxiv category'</span>].<span class="bu">str</span>.replace(<span class="st">"arxiv "</span>, <span class="st">""</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>label_to_category[<span class="st">'arxiv category'</span>] <span class="op">=</span> label_to_category[<span class="st">'arxiv category'</span>].<span class="bu">str</span>.replace(<span class="st">" "</span>, <span class="st">"."</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>label_to_category[<span class="st">'arxiv category'</span>] <span class="op">=</span> label_to_category[<span class="st">'arxiv category'</span>].<span class="bu">str</span>.upper()</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>label_to_category.head()</span></code></pre></div>
<p>Read mapping from MAG paper ID to paper titles and abstracts using
file provided by OGB in the <code>ogbn-arxiv</code> description.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>title_abs <span class="op">=</span> pd.read_csv(<span class="st">"dataset/titleabs.tsv"</span>, sep <span class="op">=</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, names <span class="op">=</span> [<span class="st">"Node"</span>, <span class="st">"NodeTitle"</span>, <span class="st">"NodeAbstract"</span>])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>title_abs.head()</span></code></pre></div>
<p>Construct the node list as a <code>DataFrame</code> (see
<code>graph.keys()</code> for accessing elements in the
<code>graph</code> dictionary). Abstracts are not included to save
space. Map between OGB node ID and MAG paper ID; then, use the MAG paper
ID to retrieve the title and abstract. Also map between OGB category
label and arXiv category label.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>node_list_of_lists <span class="op">=</span> []</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> node_id <span class="kw">in</span> <span class="bu">range</span>(graph[<span class="st">"num_nodes"</span>]):</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get node values from graph</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    node_type <span class="op">=</span> label[node_id][<span class="dv">0</span>]</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    node_year <span class="op">=</span> graph[<span class="st">"node_year"</span>][node_id][<span class="dv">0</span>]</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># retrieve MAG ID</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    node_magid <span class="op">=</span> nodeid_to_paperid.loc[nodeid_to_paperid[<span class="st">"node idx"</span>] <span class="op">==</span> node_id, <span class="st">"paper id"</span>].values[<span class="dv">0</span>]</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get title and abstract</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    node_title <span class="op">=</span> title_abs.loc[title_abs[<span class="st">"Node"</span>] <span class="op">==</span> node_magid, <span class="st">"NodeTitle"</span>].values[<span class="dv">0</span>]</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># node_abstract = title_abs.loc[title_abs["Node"] == node_magid, "NodeAbstract"].values[0]</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get category</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>    node_category <span class="op">=</span> label_to_category.loc[label_to_category[<span class="st">"label idx"</span>] <span class="op">==</span> node_type, <span class="st">"arxiv category"</span>].values[<span class="dv">0</span>]</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add row to data frame</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    node_list_of_lists.append([node_id, node_type, node_year, node_magid, node_title, node_category]) <span class="co"># node_abstract, </span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>node_list <span class="op">=</span> pd.DataFrame(node_list_of_lists, columns<span class="op">=</span>[<span class="st">"Node"</span>, <span class="st">"NodeType"</span>, <span class="st">"NodeYear"</span>, <span class="st">"NodeMAGID"</span>, <span class="st">"NodeTitle"</span>, <span class="st">"NodeCategory"</span>]) <span class="co"># "NodeAbstract", </span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>node_list.head()</span></code></pre></div>
<p>Similarly, construct the edge list as a <code>DataFrame</code>. In
addition to origin and destination node IDs, also retrieve origin and
destination node types.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>edge_list_of_lists <span class="op">=</span> []</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> edge_index <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(graph[<span class="st">"edge_index"</span>][<span class="dv">0</span>])):</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get edge values from graph</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    edge_origin <span class="op">=</span> graph[<span class="st">"edge_index"</span>][<span class="dv">0</span>][edge_index]</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    edge_destination <span class="op">=</span> graph[<span class="st">"edge_index"</span>][<span class="dv">1</span>][edge_index]</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># get origin and destination types</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    origin_type <span class="op">=</span> label[edge_origin][<span class="dv">0</span>]</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    destination_type <span class="op">=</span> label[edge_destination][<span class="dv">0</span>]</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># add row to data frame</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    edge_list_of_lists.append([edge_origin, edge_destination, origin_type, destination_type])</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>edge_list <span class="op">=</span> pd.DataFrame(edge_list_of_lists, columns<span class="op">=</span>[<span class="st">"Origin"</span>, <span class="st">"Destination"</span>, <span class="st">"OriginType"</span>, <span class="st">"DestinationType"</span>])</span></code></pre></div>
<p>Save node and edge lists as <code>.csv</code> files to be read into
R.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save node and edge lists as CSV files</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>node_list.to_csv(<span class="st">"inst/extdata/arxiv_node_list.csv"</span>, index <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>edge_list.to_csv(<span class="st">"inst/extdata/arxiv_edge_list.csv"</span>, index <span class="op">=</span> <span class="va">False</span>)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="parse-kg-in-r">Parse KG in R<a class="anchor" aria-label="anchor" href="#parse-kg-in-r"></a>
</h2>
<p>Read the <code>.csv</code> node and edge lists saved previously.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load libraries</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-datatable.com" class="external-link">data.table</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load metapaths library</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://www.ayushnoori.com/metapaths" class="external-link">metapaths</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># read data</span></span>
<span><span class="va">arxiv_node_list</span> <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"inst/extdata/arxiv_node_list.csv"</span><span class="op">)</span></span>
<span><span class="va">arxiv_edge_list</span> <span class="op">=</span> <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/fread.html" class="external-link">fread</a></span><span class="op">(</span><span class="st">"inst/extdata/arxiv_edge_list.csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">arxiv_node_list</span><span class="op">)</span></span></code></pre></div>
<p>Coerce types to character vectors as needed.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">arxiv_node_list</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">.</span><span class="op">[</span>, <span class="va">Node</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">Node</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="va">.</span><span class="op">[</span>, <span class="va">NodeType</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">NodeType</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">arxiv_edge_list</span> <span class="op">=</span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfc</a></span><span class="op">(</span><span class="va">arxiv_edge_list</span>, <span class="va">as.character</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://Rdatatable.gitlab.io/data.table/reference/as.data.table.html" class="external-link">as.data.table</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Find similar papers; in this case, nodes that share “meta path” in
the title. Use the meta path <code>c(26, 26, 24)</code>, which
corresponds to <code>CS.SI - CS.SI - CS.AI</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># find nodes that share meta path</span></span>
<span><span class="va">metapath_papers</span> <span class="op">=</span> <span class="va">arxiv_node_list</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"meta path"</span>, <span class="va">NodeTitle</span><span class="op">)</span>, <span class="op">]</span></span>
<span><span class="va">metapath_papers</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span>, <span class="fu">.</span><span class="op">(</span><span class="va">Node</span>, <span class="va">NodeTitle</span>, <span class="va">NodeCategory</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>Check similarity between two nodes.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># test similarity between nodes</span></span>
<span><span class="va">sim_test</span> <span class="op">=</span> <span class="fu"><a href="../reference/get_similarity.html">get_similarity</a></span><span class="op">(</span></span>
<span>    <span class="st">"21500"</span>, <span class="st">"37908"</span>,</span>
<span>    mp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"26"</span>, <span class="st">"26"</span>, <span class="st">"24"</span><span class="op">)</span>,</span>
<span>    node_list <span class="op">=</span> <span class="va">arxiv_node_list</span>,</span>
<span>    edge_list <span class="op">=</span> <span class="va">arxiv_edge_list</span>,</span>
<span>    verbose <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ayush Noori, Michelle M. Li, Amelia L. M. Tan, Marinka Zitnik.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
  <p class="preferably">Using <a href="https://preferably.amirmasoudabdol.name/?source=footer" class="external-link">preferably</a> template.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
